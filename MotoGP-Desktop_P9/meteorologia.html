<!DOCTYPE HTML>

<html lang="es">
<head>
    <!-- Datos que describen el documento -->
    <meta charset="UTF-8" />
    <title>MOTOGP-Meteorologia</title>
    <meta name="author" content="Gael Horta Calzada" />
    <meta name="description" content="Información sobre meteorologia de MotoGP" />
    <meta name="keywords" content="MotoGP,meteorologia,pronostico tiempo" />
    <meta name ="viewport" content ="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="estilo/estilo.css" />
    <link rel="stylesheet" type="text/css" href="estilo/layout.css" />
    <link rel="icon" href="multimedia/favicon.ico">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="js/ciudad.js"></script>
</head>

<body>
    <!-- Datos con el contenidos que aparece en el navegador -->
    <header>
    <h1><a href="index.html" title="Ir a la página principal">MotoGP Desktop</a></h1>
    <nav>
        <a href="index.html" title="Inicio MotoGPDekstop">Inicio</a>
        <a href="piloto.html" title="Piloto MotoGPDekstop">Piloto</a>
        <a href="circuito.html" title="Circuito MotoGPDekstop">Circuito</a>
        <a href="meteorologia.html" title="Meteorología MotoGPDekstop" class="active">Meteorología</a>
        <a href="clasificaciones.php" title="Clasificaciones MotoGPDekstop">Clasificaciones</a>
        <a href="juegos.html" title="Juegos MotoGPDekstop">Juegos</a>
        <a href="ayuda.html" title="Ayuda MotoGPDekstop">Ayuda</a>
    </nav>
    </header>
    <p>Estás en: <a href="index.html">Inicio</a> >> Meteorología</p>
    <main>
        <h2>Meteorologia de MotoGP-Desktop</h2>
        <section>
            <h3>Información de la Ciudad</h3>
        </section>
        <section>
            <h3>Meteorología del Día de Carrera</h3>
        </section>
        <section>
            <h3>Meteorología Entrenos</h3>
        </section>
        <script>
            $(document).ready(function() {
                const ciudadJerez = new Ciudad(
                    "Jerez de la Frontera",
                    "España",
                    "jerezano"
                );
                const poblacionJerez = 213668;
                const coordenadasJerez = {
                    lat: 36.683,
                    lon: -6.138
                };
                ciudadJerez.rellenarAtrib(poblacionJerez, coordenadasJerez);
                
                const $infoSection = $("main > section:first-of-type");
                $infoSection.empty();
                $infoSection.append($("<h3>").text("Información de la Ciudad"));
                $infoSection.append($("<h2>").text(ciudadJerez.getNombre()));
                $infoSection.append($("<p>").text("País: " + ciudadJerez.getPais()));
                $infoSection.append(ciudadJerez.getInfoSecundariaHTML()); 
                $infoSection.append(ciudadJerez.escribirCoordenadas()); 

                const $meteoSection = $("main > section:nth-of-type(2)");

                ciudadJerez.getMeteorologiaCarrera()
                    .done(function(data) {
                        const $elementosCarrera = ciudadJerez.procesarJSONCarrera(data);
                        
                        $meteoSection.empty();
                        $meteoSection.append($("<h3>").text("Meteorología del Día de Carrera"));
                        $meteoSection.append($elementosCarrera);
                    })
                    .fail(function(error) {
                        console.error("Error al cargar meteorología:", error);
                        $meteoSection.empty();
                        $meteoSection.append($("<h3>").text("Meteorología del Día de Carrera"));
                        $meteoSection.append($("<p>").text("No se pudieron cargar los datos meteorológicos."));
                    });
                
                const $entrenosSection = $("main > section:nth-of-type(3)");

                ciudadJerez.getMeteorologiaEntrenos()
                    .done(function(data) {
                        const $listaEntrenos = ciudadJerez.procesarJSONEntrenos(data);
                        
                        $entrenosSection.empty();
                        $entrenosSection.append($("<h3>").text("Media Meteorológica (3 Días de Entrenamientos)"));
                        $entrenosSection.append($listaEntrenos);
                    })
                    .fail(function(error) {
                        console.error("Error al cargar meteorología de entrenamientos:", error);
                        $entrenosSection.empty();
                        $entrenosSection.append($("<h3>").text("Media Meteorológica (3 Días de Entrenamientos)"));
                        $entrenosSection.append($("<p>").text("No se pudieron cargar los datos de los entrenamientos."));
                    });
            });
        </script>
    </main>
</body>
</html>